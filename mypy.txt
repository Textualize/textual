poetry run mypy src/textual
src/textual/app.py:315: error: Argument "file" to "Console" has incompatible type "_WriterThread"; expected "Optional[IO[str]]"  [arg-type]
src/textual/app.py:1607: error: Value of type variable "_T_io" of "redirect_stderr" cannot be "StdoutRedirector"  [type-var]
src/textual/app.py:1612: error: Value of type variable "_T_io" of "redirect_stderr" cannot be "_NullFile"  [type-var]
src/textual/app.py:1613: error: Value of type variable "_T_io" of "redirect_stdout" cannot be "_NullFile"  [type-var]
src/textual/app.py:1744: error: Incompatible types in assignment (expression has type "reversed[Widget]", variable has type "List[Widget]")  [assignment]
src/textual/widgets/_header.py:136: error: Argument 3 to "watch" of "DOMNode" has incompatible type "Callable[[str], None]"; expected "Union[Callable[[], Awaitable[None]], Callable[[], None]]"  [arg-type]
src/textual/widgets/_header.py:137: error: Argument 3 to "watch" of "DOMNode" has incompatible type "Callable[[str], None]"; expected "Union[Callable[[], Awaitable[None]], Callable[[], None]]"  [arg-type]
src/textual/widgets/_footer.py:69: error: Argument 3 to "watch" of "DOMNode" has incompatible type "Callable[[Optional[Widget]], None]"; expected "Union[Callable[[], Awaitable[None]], Callable[[], None]]"  [arg-type]
src/textual/widgets/_list_view.py:94: error: Incompatible types in assignment (expression has type "Optional[int]", variable has type "int")  [assignment]
src/textual/widgets/_list_view.py:97: error: Missing return statement  [return]
src/textual/widgets/_list_view.py:102: error: Incompatible return value type (got "Widget", expected "Optional[ListItem]")  [return-value]
src/textual/widgets/_list_view.py:132: error: "Widget" has no attribute "highlighted"  [attr-defined]
src/textual/widgets/_list_view.py:135: error: "Widget" has no attribute "highlighted"  [attr-defined]
src/textual/widgets/_list_view.py:140: error: Argument 2 to "Highlighted" has incompatible type "Optional[Widget]"; expected "Optional[ListItem]"  [arg-type]
src/textual/widgets/_list_view.py:165: error: Incompatible types in assignment (expression has type "None", variable has type "int")  [assignment]
src/textual/widgets/_list_view.py:171: error: Argument 2 to "Selected" has incompatible type "Optional[ListItem]"; expected "ListItem"  [arg-type]
src/textual/widgets/_list_view.py:184: error: Argument 2 to "Selected" has incompatible type "MessageTarget"; expected "ListItem"  [arg-type]
src/textual/widgets/_data_table.py:703: error: Unsupported operand types for in ("Union[RowKey, str]" and "TwoWayDict[RowKey, int]")  [operator]
src/textual/widgets/_data_table.py:705: error: Argument 1 to "get" of "dict" has incompatible type "Union[RowKey, str]"; expected "RowKey"  [arg-type]
src/textual/widgets/_data_table.py:728: error: Argument 1 to "get_row" of "DataTable" has incompatible type "Optional[RowKey]"; expected "Union[RowKey, str]"  [arg-type]
src/textual/widgets/_data_table.py:742: error: Unsupported operand types for in ("Union[ColumnKey, str]" and "TwoWayDict[ColumnKey, int]")  [operator]
src/textual/widgets/_data_table.py:748: error: Invalid index type "Union[ColumnKey, str]" for "Dict[ColumnKey, CellType]"; expected type "ColumnKey"  [index]
src/textual/widgets/_data_table.py:766: error: Argument 1 to "get_column" of "DataTable" has incompatible type "Optional[ColumnKey]"; expected "Union[ColumnKey, str]"  [arg-type]
src/textual/widgets/_data_table.py:873: error: Argument 1 to "CellKey" has incompatible type "Optional[RowKey]"; expected "RowKey"  [arg-type]
src/textual/widgets/_data_table.py:873: error: Argument 2 to "CellKey" has incompatible type "Optional[ColumnKey]"; expected "ColumnKey"  [arg-type]
src/textual/widgets/_data_table.py:882: error: Argument 3 to "RowHighlighted" has incompatible type "Optional[RowKey]"; expected "RowKey"  [arg-type]
src/textual/widgets/_data_table.py:891: error: Argument 3 to "ColumnHighlighted" has incompatible type "Optional[ColumnKey]"; expected "ColumnKey"  [arg-type]
src/textual/widgets/_data_table.py:986: error: Invalid index type "Optional[RowKey]" for "Dict[RowKey, Row]"; expected type "RowKey"  [index]
src/textual/widgets/_data_table.py:991: error: Invalid index type "Optional[ColumnKey]" for "Dict[ColumnKey, Column]"; expected type "ColumnKey"  [index]
src/textual/widgets/_data_table.py:1006: error: Invalid index type "Optional[RowKey]" for "Dict[RowKey, Row]"; expected type "RowKey"  [index]
src/textual/widgets/_data_table.py:1022: error: Invalid index type "Optional[ColumnKey]" for "Dict[ColumnKey, Column]"; expected type "ColumnKey"  [index]
src/textual/widgets/_data_table.py:1284: error: Invalid index type "Optional[ColumnKey]" for "Dict[ColumnKey, Column]"; expected type "ColumnKey"  [index]
src/textual/widgets/_data_table.py:1300: error: Invalid index type "Optional[RowKey]" for "Dict[RowKey, Row]"; expected type "RowKey"  [index]
src/textual/widgets/_data_table.py:1372: error: Incompatible types in assignment (expression has type "Optional[RowKey]", variable has type "RowKey")  [assignment]
src/textual/widgets/_data_table.py:1376: error: Unsupported operand types for in ("Tuple[RowKey, Optional[ColumnKey], Style, bool, bool, int]" and "LRUCache[Tuple[RowKey, ColumnKey, Style, bool, bool, int], List[List[Segment]]]")  [operator]
src/textual/widgets/_data_table.py:1385: error: Argument 1 has incompatible type "Tuple[RowKey, Optional[ColumnKey], Style, bool, bool, int]"; expected "Tuple[RowKey, ColumnKey, Style, bool, bool, int]"  [arg-type]
src/textual/widgets/_data_table.py:1386: error: Invalid index type "Tuple[RowKey, Optional[ColumnKey], Style, bool, bool, int]" for "LRUCache[Tuple[RowKey, ColumnKey, Style, bool, bool, int], List[List[Segment]]]"; expected type "Tuple[RowKey, ColumnKey, Style, bool, bool, int]"  [index]
src/textual/widgets/_data_table.py:1424: error: Unsupported operand types for in ("Tuple[RowKey, int, Style, Coordinate, Coordinate, str, bool, bool, int]" and "LRUCache[Tuple[RowKey, int, Style, Coordinate, Coordinate, Literal['cell', 'row', 'column', 'none'], bool, bool, int], Tuple[List[List[Segment]], List[List[Segment]]]]")  [operator]
src/textual/widgets/_data_table.py:1425: error: Invalid index type "Tuple[RowKey, int, Style, Coordinate, Coordinate, str, bool, bool, int]" for "LRUCache[Tuple[RowKey, int, Style, Coordinate, Coordinate, Literal['cell', 'row', 'column', 'none'], bool, bool, int], Tuple[List[List[Segment]], List[List[Segment]]]]"; expected type "Tuple[RowKey, int, Style, Coordinate, Coordinate, Literal['cell', 'row', 'column', 'none'], bool, bool, int]"  [index]
src/textual/widgets/_data_table.py:1461: error: Argument 1 to "Coordinate" has incompatible type "Optional[int]"; expected "int"  [arg-type]
src/textual/widgets/_data_table.py:1463: error: Argument 1 has incompatible type "Optional[int]"; expected "int"  [arg-type]
src/textual/widgets/_data_table.py:1468: error: Argument 3 to "_should_highlight" has incompatible type "str"; expected "Literal['cell', 'row', 'column', 'none']"  [arg-type]
src/textual/widgets/_data_table.py:1470: error: Argument 3 to "_should_highlight" has incompatible type "str"; expected "Literal['cell', 'row', 'column', 'none']"  [arg-type]
src/textual/widgets/_data_table.py:1482: error: Unsupported operand types for % ("None" and "int")  [operator]
src/textual/widgets/_data_table.py:1482: note: Left operand is of type "Optional[int]"
src/textual/widgets/_data_table.py:1490: error: Argument 1 to "Coordinate" has incompatible type "Optional[int]"; expected "int"  [arg-type]
src/textual/widgets/_data_table.py:1492: error: Argument 1 has incompatible type "Optional[int]"; expected "int"  [arg-type]
src/textual/widgets/_data_table.py:1496: error: Argument 3 to "_should_highlight" has incompatible type "str"; expected "Literal['cell', 'row', 'column', 'none']"  [arg-type]
src/textual/widgets/_data_table.py:1497: error: Argument 3 to "_should_highlight" has incompatible type "str"; expected "Literal['cell', 'row', 'column', 'none']"  [arg-type]
src/textual/widgets/_data_table.py:1502: error: Argument 1 has incompatible type "Tuple[RowKey, int, Style, Coordinate, Coordinate, str, bool, bool, int]"; expected "Tuple[RowKey, int, Style, Coordinate, Coordinate, Literal['cell', 'row', 'column', 'none'], bool, bool, int]"  [arg-type]
src/textual/widgets/_data_table.py:1558: error: Unsupported operand types for in ("Tuple[int, int, int, int, Coordinate, Coordinate, Style, str, bool, int]" and "LRUCache[Tuple[int, int, int, int, Coordinate, Coordinate, Style, Literal['cell', 'row', 'column', 'none'], bool, int], Strip]")  [operator]
src/textual/widgets/_data_table.py:1559: error: Invalid index type "Tuple[int, int, int, int, Coordinate, Coordinate, Style, str, bool, int]" for "LRUCache[Tuple[int, int, int, int, Coordinate, Coordinate, Style, Literal['cell', 'row', 'column', 'none'], bool, int], Strip]"; expected type "Tuple[int, int, int, int, Coordinate, Coordinate, Style, Literal['cell', 'row', 'column', 'none'], bool, int]"  [index]
src/textual/widgets/_data_table.py:1578: error: Argument 1 has incompatible type "Tuple[int, int, int, int, Coordinate, Coordinate, Style, str, bool, int]"; expected "Tuple[int, int, int, int, Coordinate, Coordinate, Style, Literal['cell', 'row', 'column', 'none'], bool, int]"  [arg-type]
src/textual/widgets/_data_table.py:1586: error: List comprehension has incompatible type List[Optional[RowKey]]; expected List[RowKey]  [misc]
src/textual/widgets/_data_table.py:1643: error: Argument "key" to "sorted" has incompatible type "Callable[[Tuple[RowKey, Dict[Union[ColumnKey, str], CellType]]], Any]"; expected "Callable[[Tuple[RowKey, Dict[ColumnKey, CellType]]], Union[SupportsDunderLT[Any], SupportsDunderGT[Any]]]"  [arg-type]
src/textual/widgets/_button.py:219: error: Item "ConsoleRenderable" of "Union[ConsoleRenderable, RichCast, str]" has no attribute "copy"  [union-attr]
src/textual/widgets/_button.py:219: error: Item "RichCast" of "Union[ConsoleRenderable, RichCast, str]" has no attribute "copy"  [union-attr]
src/textual/widgets/_button.py:219: error: Item "str" of "Union[ConsoleRenderable, RichCast, str]" has no attribute "copy"  [union-attr]
Found 57 errors in 6 files (checked 154 source files)
